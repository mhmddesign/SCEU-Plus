(function(){const W=["lorem","ipsum","dolor","sit","amet","consectetur","adipiscing","elit","sed","do","eiusmod","tempor","incididunt","ut","labore","et","dolore","magna","aliqua","enim","ad","minim","veniam","quis","nostrud","exercitation","ullamco","laboris","nisi","aliquip","ex","ea","commodo","consequat","duis","aute","irure","in","reprehenderit","voluptate","velit","esse","cillum","fugiat","nulla","pariatur","excepteur","sint","occaecat","cupidatat","non","proident","sunt","culpa","qui","officia","deserunt","mollit","anim","id","est","laborum"],q=["James","Mary","John","Patricia","Robert","Jennifer","Michael","Linda","William","Elizabeth","David","Barbara","Richard","Susan","Joseph","Jessica","Thomas","Sarah","Charles","Karen","Emma","Oliver","Ava","Noah","Sophia","Liam","Isabella","Mason","Mia","Lucas","Charlotte","Ethan","Amelia"],J=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Hernandez","Lopez","Gonzalez","Wilson","Anderson","Thomas","Taylor","Moore","Jackson","Martin","Lee","Perez","Thompson","White","Harris","Sanchez","Clark","Ramirez","Lewis","Robinson","Walker"],K=["Main","Oak","Maple","Cedar","Pine","Elm","Washington","Lake","Hill","Park","View","Forest","River","Spring","Valley","Sunset","Highland"],U=["St","Ave","Blvd","Dr","Ln","Rd","Way","Ct","Pl"],Y=["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose","Austin","Jacksonville","Fort Worth","Columbus","Charlotte","Seattle","Denver","Boston","Portland"],j=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI"],R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function p(a){return a[Math.floor(Math.random()*a.length)]}function S(a,r){return Math.floor(Math.random()*(r-a+1))+a}function G(a){if(a<=0)return"";let r="",c=0,h=S(3,6);for(;r.length<a;)c>=h&&r.length>0&&r.length<a?(r+=" ",c=0,h=S(3,6)):r.length<a&&(r+=R.charAt(Math.floor(Math.random()*R.length)),c++);return r=r.substring(0,a),r.endsWith(" ")&&a>0&&(r=r.substring(0,a-1)+R.charAt(Math.floor(Math.random()*R.length))),r}function X(a){if(a<=0)return"";let r="";for(;r.length<a;){const c=p(W);r.length===0?r=c.charAt(0).toUpperCase()+c.slice(1):r+=" "+c}return r.substring(0,a)}function Z(){return`${p(q)} ${p(J)}`}function Q(a){if(a<=0)return"";let r="";for(;r.length<a;){const c=Z();r.length===0?r=c:r+=", "+c}return r.substring(0,a)}function ee(){const a=S(100,9999),r=p(K),c=p(U),h=p(Y),M=p(j),N=S(1e4,99999);return`${a} ${r} ${c}, ${h}, ${M} ${N}`}function te(a){if(a<=0)return"";let r="";for(;r.length<a;){const c=ee();r.length===0?r=c:r+=" | "+c}return r.substring(0,a)}function k(a,r){switch(r){case"lorem":return X(a);case"names":return Q(a);case"addresses":return te(a);case"random":default:return G(a)}}if(typeof window.__textRandomizerInjected>"u"){let a=function(){L||(L=!0,document.addEventListener("click",M,!0),document.addEventListener("keydown",N,!0),x.length>0?(h(),E("Text Randomizer resumed")):E("Text Randomizer activated"),console.log("[Text Randomizer] Activated. Press Esc to deactivate."))},r=function(){L&&(L=!1,document.removeEventListener("click",M,!0),document.removeEventListener("keydown",N,!0),c(),console.log("[Text Randomizer] Deactivated (paused)."),E("Text Randomizer paused"))},c=function(){document.querySelectorAll(`[${f}]`).forEach(o=>{const t=o,n=t.tagName==="INPUT"&&["button","submit","reset"].includes(t.type),i=parseInt(t.getAttribute(v)||"0",10),s=[...b].reverse().find(u=>u.element===t);if(n){const u=t;x.push({element:t,kind:"input",modifiedValue:u.value,originalValue:(s==null?void 0:s.beforeValue)||u.value,blurAmount:i}),s!=null&&s.beforeValue&&(u.value=s.beforeValue)}else x.push({element:t,kind:"element",modifiedHTML:t.innerHTML,originalHTML:(s==null?void 0:s.beforeHTML)||t.innerHTML,blurAmount:i}),s!=null&&s.beforeHTML&&(t.innerHTML=s.beforeHTML);t.removeAttribute(f),g(t,n)})},h=function(){x.forEach(e=>{const{element:o,kind:t,modifiedHTML:n,modifiedValue:i,blurAmount:s}=e;t==="input"?o.value=i||"":o.innerHTML=n||"",o.setAttribute(f,"true"),s&&s>0&&w(o,s,t==="input")}),x.length=0},M=function(e){var m;const{altKey:o,ctrlKey:t}=e;if(!o&&!t)return;const n=e.target.closest(`[${f}]`)||e.target,i=n.tagName==="INPUT"&&["button","submit","reset"].includes(n.type),s=((m=n.textContent)==null?void 0:m.trim().length)??!1,u=i&&n.value.trim().length>0,d=n.hasAttribute(f);!s&&!u&&!d||(e.preventDefault(),e.stopPropagation(),t&&o?$(n,i):t?d&&O(n,i):o&&V(n,i))},N=function(e){e.key==="Escape"?(r(),chrome.runtime.sendMessage({type:"DEACTIVATE_RANDOMIZER"}).catch(()=>{})):e.ctrlKey&&e.key.toLowerCase()==="z"&&(e.preventDefault(),_())},D=function(e){e.tagName==="INPUT"&&["button","submit","reset"].includes(e.type)?b.push({element:e,kind:"input",beforeValue:e.value}):b.push({element:e,kind:"element",beforeHTML:e.innerHTML})},V=function(e,o){D(e),g(e,o);const t=(l==null?void 0:l.fakeDataType)||"random",n=(l==null?void 0:l.regexEnabled)||!1,i=(l==null?void 0:l.regexPattern)||"";if(o){const s=e,u=s.value.trim().length;s.value=k(u,t)}else e.hasAttribute(f)?e.querySelectorAll(`[${T}]`).forEach(d=>{var A;const m=((A=d.textContent)==null?void 0:A.length)||0;d.textContent=k(m,t)}):P(e,t,n?i:"");e.setAttribute(f,"true"),z(e,"randomized"),l!=null&&l.blurEnabled&&setTimeout(()=>{w(e,(l==null?void 0:l.blurIntensity)||4,o)},200)},P=function(e,o,t){const n=t?new RegExp(t):null;function i(s){Array.from(s.childNodes).forEach(d=>{var m,A;if(d.nodeType===Node.TEXT_NODE&&((m=d.nodeValue)!=null&&m.trim())){const y=d.nodeValue;if(n&&!n.test(y))return;const I=document.createElement("span");I.setAttribute(T,"true"),I.textContent=k(y.trim().length,o),(A=d.parentNode)==null||A.replaceChild(I,d)}else if(d.nodeType===Node.ELEMENT_NODE){const y=d;y.tagName!=="SCRIPT"&&y.tagName!=="STYLE"&&i(d)}})}i(e)},$=function(e,o){if(D(e),o){const t=e,n=t.value.trim().length;t.value=" ".repeat(n)}else e.hasAttribute(f)?e.querySelectorAll(`[${T}]`).forEach(i=>{var u;const s=((u=i.textContent)==null?void 0:u.length)||0;i.textContent=" ".repeat(s)}):H(e);g(e,o),e.removeAttribute(f),z(e,"cleared")},H=function(e){Array.from(e.childNodes).forEach(t=>{var n;if(t.nodeType===Node.TEXT_NODE&&((n=t.nodeValue)!=null&&n.trim())){const i=t.nodeValue.trim().length;t.nodeValue=" ".repeat(i)}else if(t.nodeType===Node.ELEMENT_NODE){const i=t;i.tagName!=="SCRIPT"&&i.tagName!=="STYLE"&&H(t)}})},O=function(e,o){const t=parseInt(e.getAttribute(v)||"0",10),n=20;let i=t===0?(l==null?void 0:l.blurIntensity)||4:t+2;i>n&&(i=n),g(e,o),w(e,i,o,!0)},w=function(e,o,t,n=!1){const i=n?"none":"filter 0.3s ease-in";if(t){const u=window.getComputedStyle(e).color;e.style.transition=n?"none":"color 0.3s ease-in, text-shadow 0.3s ease-in",e.style.color="transparent",e.style.textShadow=`0 0 ${o}px ${u}`}else e.querySelectorAll(`[${T}]`).forEach(u=>{u.style.transition=i,u.style.filter=`blur(${o}px)`});e.setAttribute(v,o.toString()),n&&B(e,o)},g=function(e,o){o?(e.style.transition="none",e.style.color="",e.style.textShadow=""):e.querySelectorAll(`[${T}]`).forEach(n=>{n.style.transition="none",n.style.filter=""}),e.removeAttribute(v)},_=function(){if(b.length===0){E("Nothing to undo");return}const e=b.pop(),{element:o,kind:t,beforeHTML:n,beforeValue:i}=e;t==="input"?o.value=i||"":o.innerHTML=n||"",o.removeAttribute(f),g(o,t==="input"),z(o,"undone")},z=function(e,o){const t={randomized:"2px dashed #ef4444",cleared:"2px dashed #f59e0b",undone:"2px dashed #22c55e"};e.style.outline=t[o],setTimeout(()=>{e.style.outline=""},500)},B=function(e,o){var i;(i=document.querySelector(".randomizer-blur-tooltip"))==null||i.remove();const t=document.createElement("div");t.className="randomizer-blur-tooltip",t.textContent=`Blur: ${o}px`,Object.assign(t.style,{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",zIndex:"999999",pointerEvents:"none",fontFamily:"sans-serif"}),document.body.appendChild(t);const n=e.getBoundingClientRect();t.style.top=`${n.top+window.scrollY-t.offsetHeight-5}px`,t.style.left=`${n.left+window.scrollX}px`,setTimeout(()=>{t.remove()},750)},E=function(e){var t;(t=document.querySelector(".randomizer-toast"))==null||t.remove();const o=document.createElement("div");o.className="randomizer-toast",o.textContent=e,Object.assign(o.style,{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",zIndex:"999999",pointerEvents:"none",fontFamily:"system-ui, sans-serif",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}),document.body.appendChild(o),setTimeout(()=>{o.style.opacity="0",o.style.transition="opacity 0.3s",setTimeout(()=>o.remove(),300)},1500)};window.__textRandomizerInjected=!0;const f="data-randomizer-modified",T="data-randomizer-span",v="data-randomizer-blur-amount";let L=!1,l=null;const b=[],x=[];F();async function F(){await C(),l!=null&&l.enabled&&a(),chrome.runtime.onMessage.addListener((e,o,t)=>(e.type==="ACTIVATE_RANDOMIZER"?(C().then(()=>a()),t({success:!0})):e.type==="DEACTIVATE_RANDOMIZER"?(r(),t({success:!0})):e.type==="UPDATE_SETTINGS"&&(C(),t({success:!0})),!0)),chrome.storage.onChanged.addListener((e,o)=>{var t,n;o==="sync"&&((n=(t=e.settings)==null?void 0:t.newValue)!=null&&n.textRandomizer)&&(l=e.settings.newValue.textRandomizer,console.log("[Text Randomizer] Settings updated:",l))})}async function C(){var e;try{l=((e=(await chrome.storage.sync.get("settings")).settings)==null?void 0:e.textRandomizer)||null,console.log("[Text Randomizer] Settings loaded:",l)}catch(o){console.error("[Text Randomizer] Failed to load settings:",o)}}}
})()
